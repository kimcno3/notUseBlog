---
layout: post
title: "[football] AWS를 활용한 배포 환경 구성"
author: kimcno3
categories: f-lab
tags:  f-lab project2
published: true
---

## # 문제점
***

## # 해결방안
***
![](https://velog.velcdn.com/images/taeha7b/post/f60d83da-4d0f-4a57-9204-146edba2df00/AWS.png)

**AWS**는 전자 상거래 사이트를 운영하는 아마좃닷컴의 자회사인 아마존 웹서비스 사가 제공하는 **클라우드 플랫폼**으로 전 세계에서 이용합니다. AWS를 이용하면 IT와 관련된 각종 시스템을 구축하고 운영할 수 있습니다. 개인은 물론 글러볼로 전개되는 대규모 서비스에 이르기까지 다양한 분야에서 AWS를 활용할 수 있습니다.

어플리케이션/서비스를 구축하고 운영하는 환경을 **인프라스트럭처**라고 부르는데 AWS는 이러한 인프라스트럭처를 구축하고 다양한 AWS 서비스를 제공합니다.

예를 들어 어플리케이션 개발자나 개발업체는 비즈니스나 업무에 필요한 독자적인 어플리케이션을 개발합니다. 이렇게 개발한 어플리케이션을 움직이는 인프라스트럭처를 AWS로 준비하고, 해당 어플리케이션을 인프라스트럭처 위에 배포합니다.

이후 어플리케이션 사용자는 브라우저나 스마트폰등으로 해당 어플리케이션에 접속하고 이용하지만 인프라스트럭처를 AWS를 이용해 구축했는지 여부는 알 수 없습니다. 그러나 결론적으로는 안정된 서비스를 제공받을 수 있게 됩니다.

AWS와 같은 **클라우드 플랫폼으로 배포하는 경우 얻을 수 있는 장점**은 다음과 같습니다.

**1. 고정비용을 변동 비용으로 전환**

: 온프로미스 방식으로 서버를 구축하던 기업은 초기에 매우 높은 가격의 투자비용을 지불하고 이후에 투지 비용을 회수하는 방법으로 수익을 가져갔다면 클라우드 방식을 이용할 경우에는 매월 일정 금액만큼만 지불하면 되기에 성장이 필요한 기업의 입장에서 매우 매력적인 방식으로 다가올 수 밖에 없습니다.

**2. 성장을 고려한 용량 예측 불필요**

: 클라우드 환경에서는 서버의 규모를 늘리거나 줄이는 것이 매우 간단하기에 회사 규모의 변화에 따라 유연하게 서버를 관리해 불필요한 소비를 방지할 수 있습니다.

**3. 검증 및 개발 기간 단축**

: 시간 단위로 기기를 임대하는 클라우드에서는 신기술을 검증하는 최신 기자재 등을 정해진 기간에 제공할 수 있습니다. 따라서 변화가 빠른 IT 기술에 뒤쳐지지 않고 따라갈 수 있습니다.

**4. 데이터센터 유지보수 불필요**

: 서버나 네트워크 등의 장비는 클라우드 제공자가 운용하기 때문에 기기 설치나 케이블 배선, 기자재 조달이나 계약같은 일체의 보수 작업은 신경쓰지 않아도 됩니다.

다음은 AWS에서 인프라스트럭처를 구성하는데 필요한 개념들과 제가 구성한 인프라스트럭처를 소개하고 설명하겠습니다.

### 1. VPC
설명

### 2. 서브넷 
설명

#### 서브넷 CIDR 선정
서브넷의 CIDR과 리소스 수는 트레이드 오프 관계입니다. 즉 서브넷 비트 수를 증가시키면 해당 서브넷에서 생성할 수 있는 리소스의 수는 줄어드는 구조입니다. 그래서 서브넷 범위와 리소스 수를 고려해 가각의 여유있는 크기로 구성하는 것이 중요합니다.

![](https://velog.velcdn.com/images/alicewland/post/4b4a0962-4b67-49a9-8fe3-59054db42759/image.png)

저는 서브넷 비트수를 4비트로 구성하면서 리소스는 12비트로 구성했습니다.
이렇게 되면 서브넷은 최대 16개까지, 리소스는 4091개까지 구성이 가능해 일반적인 상황에서 가장 보편적인 배분을 선택했습니다.

### 3. EC2
설명

#### Amazon Linux vs Ubuntu

| Amazon Linux                                            | Ubuntu                                                                                             |
|:--------------------------------------------------------|:---------------------------------------------------------------------------------------------------|
| Amazon에서 개발하고 지속적으로 유지 관리합니다.                           | Canonical에서 개발 및 유지 관리합니다.                                                                         |
| Amazon 웹 서버 및 컴퓨팅 클라우드만 지원합니다                           | **Microsoft Azure, Google 클라우드 및 IBM 클라우드를 포함하되 이에 국한되지 않는 모든 주요 웹 호스팅 및 컴퓨팅 서비스를 지원합니다**          |
| 웹 서비스 및 머신 이미지에만 사용됩니다                                  | **가정용 컴퓨터와 웹 서버 모두에서 사용할 수 있습니다**                                                                  |
| Amazon EC2 사용자에게는 무료입니다                                 | 무료 및 프리미엄 플랜이 있습니다                                                                                 |
| Amazon 웹 서비스 도구가 사전 설치되어 제공되므로 EC2 인스턴스 내에서 스크립팅이 가능합니다 | AWS 관련 도구가 사전 설치되어 제공되지 않습니다                                                                       |


EC2의 AMI(Amazon Machine Image)를 선정해본다면 Amazon Linux와 Ubuntu에서 하나를 선택해보기로 했고 각 이미지의 차이점과 장점을 비교해봤습니다. 그 결과 Ubuntu가 이후에 변경될 수 있는 작업 및 배포 환경에 대해서 지원가능하다는 점이 유연한 대처가 가능할 것이라는 판단 하에 Ubuntu를 AMI로 선정하게 되었습니다.

#### 채팅 서버(배스천 서버)

#### API 서버

### 4. 로드밸런서

### 5. RDS

### 6. ElastiCache

### 최종 구성된 인프라스트럭처

설계도 사진 첨부

## # 마치며
***

## # 참고자료
***